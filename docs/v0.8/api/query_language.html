<!DOCTYPE html><html><head><meta charset="utf-8" /><!--Always force latest IE rendering engine or request Chrome Frame--><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><!--Use title if it's in the page YAML frontmatter--><title>InfluxDB Query Language</title><script src="//fast.fonts.net/jsapi/2de9def5-2dd1-4d89-b4bb-cd7e5f821645.js" type="text/javascript"></script><link href="/stylesheets/all.css" rel="stylesheet" type="text/css" /><script src="/javascripts/all.js" type="text/javascript"></script></head><body class="docs docs_v0"><header class="navigation"><div class="menu-wrapper"><a class="logo" href="/"><img src="/images/influxdb-light400.png" /></a><p class="navigation-menu-button" id="js-mobile-menu">MENU</p><div class="nav"><ul id="navigation-menu"><li class="nav-link"><a href="/docs/v0.8/introduction/overview.html">Overview</a></li><li class="nav-link"><a target="blank" href="https://customers.influxdb.com">Support & Hosting</a></li><li class="nav-link"><a href="/blog">Blog</a></li><li class="nav-link"><a href="/docs/v0.8/introduction/getting_started.html">Docs</a></li><li class="nav-link"><a href="/community">Community</a></li><li class="nav-link"><a target="blank" href="http://play.influxdb.org">Play</a></li></ul></div><div class="navigation-tools"><a class="sign-up" href="/download">Download</a></div></div></header><section role="main"><div class="row"><div class="large-4 medium-4 columns"><div class="sidebar"><nav><ul class="side-nav"><li class="heading">Introduction</li><li><a href="/docs/v0.8/introduction/overview.html">Overview</a></li><li><a href="/docs/v0.8/introduction/installation.html">Installation</a></li><li><a href="/docs/v0.8/introduction/getting_started.html">Getting Started</a></li><li class="divider"></li><li class="heading">API</li><li><a href="/docs/v0.8/api/reading_and_writing_data.html">Reading & Writing Data</a></li><li><a href="/docs/v0.8/api/query_language.html">Query Language</a></li><li><a href="/docs/v0.8/api/aggregate_functions.html">Aggregate Functions</a></li><li><a href="/docs/v0.8/api/continuous_queries.html">Continuous Queries</a></li><li><a href="/docs/v0.8/api/chunked_responses.html">Chunked HTTP Responses</a></li><li><a href="/docs/v0.8/api/administration.html">Administration</a></li><li class="divider"></li><li class="heading">UI</li><li><a href="/docs/v0.8/ui/built_in_admin_and_explorer.html">Built-in Admin and Explorer Interface</a></li><li><a href="/docs/v0.8/ui/grafana.html">Grafana Dashboards</a></li><li><a href="https://github.com/hakobera/influga">Influga Dashboards</a></li><li class="divider"></li><li class="heading">Advanced Topics</li><li><a href="/docs/v0.8/advanced_topics/sharding_and_storage.html">Underlying Storage and Shards</a></li><li><a href="/docs/v0.8/advanced_topics/configuration_options.html">Configuration Options</a></li><li><a href="/docs/v0.8/advanced_topics/schema_design.html">Schema Design</a></li><li><a href="/docs/v0.8/advanced_topics/performance_considerations.html">Performance Considerations</a></li><li><a href="/docs/v0.8/advanced_topics/security.html">Security</a></li><li><a href="/docs/v0.8/advanced_topics/upgrading.html">Upgrading from Previous Versions</a></li><li class="divider"></li><li class="heading">Clustering</li><li><a href="/docs/v0.8/clustering/design.html">Design</a></li><li><a href="/docs/v0.8/clustering/setup.html">Setup</a></li><li class="divider"></li><li class="heading">Guides</li><li><a href="/docs/v0.8/guides/intro.html">Introduction</a></li><li><a href="/docs/v0.8/guides/replacing_graphite.html">Replacing Graphite</a></li><li><a href="http://www.fluentd.org/guides/recipes/syslog-influxdb">Syslog Analytics with FluentD</a></li><li class="divider"></li><li class="heading">Future Features</li><li><a href="/docs/v0.8/future/binary_protocol.html">Binary Protocol</a></li><li><a href="/docs/v0.8/future/pubsub.html">Pubsub</a></li><li><a href="/docs/v0.8/future/column_indexes.html">Column Indexes and Tags</a></li><li><a href="/docs/v0.8/future/custom_functions.html">Custom Functions</a></li><li><a href="/docs/v0.8/future/security.html">Security Enhancements</a></li><li><a href="/docs/v0.8/future/merge.html">Merging Many Series</a></li><li class="divider"></li><li class="heading">Client Libraries</li><li><a href="/docs/v0.8/client_libraries/javascript.html">JavaScript</a></li><li><a href="https://github.com/influxdb/influxdb-ruby">Ruby</a></li><li><a href="https://github.com/influxdb/influxdb-rails">Rails</a></li><li><a href="/docs/v0.8/client_libraries/python.html">Python</a></li><li><a href="https://github.com/puentesarrin/asyncflux">Python (async Tornado)</a></li><li><a href="/docs/v0.8/client_libraries/node.html">Node.js</a></li><li><a href="/docs/v0.8/client_libraries/php.html">PHP</a></li><li><a href="https://github.com/majst01/influxdb-java">Java</a></li><li><a href="https://github.com/olauzon/capacitor">Clojure</a></li><li><a href="https://github.com/mmaul/cl-influxdb">Common Lisp</a></li><li><a href="https://github.com/davidB/metrics-influxdb">Java Metrics</a></li><li><a href="https://github.com/influxdb/influxdb-go">Go</a></li><li><a href="https://github.com/rcrowley/go-metrics">Go Metrics</a></li><li><a href="https://github.com/influxdb/influxdb-scala">Scala</a></li><li><a href="https://github.com/influxdb/influxdb-r">R</a></li><li><a href="https://github.com/radekg/erflux">Erlang</a></li><li><a href="https://metacpan.org/pod/InfluxDB">Perl</a></li><li><a href="https://github.com/maoe/influxdb-haskell">Haskell</a></li><li class="divider"></li><li class="heading">Contributing</li><li><a href="https://github.com/influxdb/influxdb/blob/master/docs/contributing.md">Building and Contributing</a></li><li><a href="/community/cla.html">CLA</a></li><li><a href="https://github.com/influxdb/influxdb.org">To this Documentation</a></li><li><a href="https://github.com/influxdb/influxdb/blob/master/LICENSE">License (MIT)</a></li><li class="divider"></li><li class="heading">Other Libraries and Tools</li><li><a href="https://github.com/Dieterbe/influx-cli">CLI (Go)</a></li><li><a href="https://github.com/FGRibreau/influxdb-cli">CLI (Node)</a></li><li><a href="https://github.com/phstc/influxdb-cli">CLI (Ruby)</a></li><li><a href="http://grafana.org/">Grafana (dashboards)</a></li><li><a href="https://github.com/vimeo/graphite-influxdb">Graphite-Influxdb bridge</a></li><li><a href="https://github.com/obfuscurity/tasseo">Tasseo (realtime dashboard)</a></li><li><a href="https://github.com/bernd/statsd-influxdb-backend">StatsD Backend</a></li><li><a href="https://github.com/bpaquet/collectd-influxdb-proxy">CollectD Proxy</a></li><li><a href="https://github.com/fangli/fluent-plugin-influxdb">FluentD Plugin</a></li><li><a href="https://github.com/lusis/sensu_influxdb_handler">Sensu Handler</a></li><li><a href="https://github.com/SimpleFinance/chef-handler-influxdb">Chef Handler/Reporter</a></li><li><a href="https://github.com/CargoSense/puppet-influxdb">Config Management via Boxen</a></li><li><a href="https://github.com/savoirfairelinux/mod-influxdb">Shinken module</a></li><li class="divider"></li><li class="heading">Docs Versions</li><li><a href="/docs/v0.6/introduction/overview.html">v0.6</a></li><li><a href="/docs/v0.7/introduction/overview.html">v0.7</a></li><li><a href="/docs/v0.8/introduction/overview.html">v0.8</a></li></ul></nav><a class="button download expand" href="/download" style="margin-bottom: 0;">Download InfluxDB</a></div></div><div class="large-8 medium-8 columns" id="docs"><h1 id="query-language">Query Language</h1>

<p>InfluxDB features a SQL like query language, only used for querying data. The HTTP API has endpoints for writing data and performing other database administration tasks. The only exception to this is <a href="/docs/v0.8/api/continuous_queries.html">continuous queries</a>, which perpetually write their results into one or more time series.</p>

<h2 id="getting-series-with-special-characters">Getting series with special characters</h2>

<p>InfluxDB allows you to use any characters in your time series names. However, parsing queries for those series can be tricky. So it&rsquo;s best to wrap your queries for any series that has characters other than letters in double quotes like this:</p>
<pre class="highlight sql"><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="nv">"series with special characters!"</span>

<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="nv">"series with </span><span class="se">\"</span><span class="nv">double quotes</span><span class="se">\"</span><span class="nv">"</span>
</pre>

<h2 id="getting-a-list-of-time-series">Getting a List of Time Series</h2>

<p>There are two different methods for returning a list of all time series in a database:</p>
<pre class="highlight sql"><span class="n">list</span> <span class="n">series</span>
<span class="c1">-- or this
</span><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="o">/</span><span class="p">.</span><span class="o">*/</span> <span class="k">limit</span> <span class="mi">1</span>
</pre>

<p>The first query will return all series, while the second will return the most recent point from each series that matches the given regex.</p>

<h2 id="select-and-time-ranges">Select and Time Ranges</h2>

<p>By default, InfluxDB returns data in time descending order. The most efficient queries run over only a single column in a given time series.</p>
<pre class="highlight sql"><span class="k">select</span> <span class="n">value</span> <span class="k">from</span> <span class="n">response_times</span><span class="p">;</span>
</pre>

<p>This simple query pulls the values for the <code>value</code> column from the <code>response_times</code> series.</p>

<h3 id="how-to-set-query-start-and-end-time">How to set query start and end time</h3>

<p>If start and end times aren&rsquo;t set they will default to beginning of
time until now, respectively.</p>

<p>The column <code>time</code> is built in for every time series in the
database. You specify the start and end times by setting conditions on
the <code>time</code> columns in the where clause.</p>

<p>Below are the different formats that can be used to specify start and
end times.</p>

<h4 id="date-time-strings">Date time strings</h4>

<p>Date time strings have the format <code>YYYY-MM-DD HH:MM:SS.mmm</code> where
<code>mmm</code> are the milliseconds within the second. For example:</p>
<pre class="highlight sql"><span class="k">select</span> <span class="n">value</span> <span class="k">from</span> <span class="n">response_times</span>
<span class="k">where</span> <span class="n">time</span> <span class="o">&gt;</span> <span class="s1">'2013-08-12 23:32:01.232'</span> <span class="k">and</span> <span class="n">time</span> <span class="o">&lt;</span> <span class="s1">'2013-08-13'</span><span class="p">;</span>
</pre>

<p>The time and date should be wrapped in single quotes. If you only
specify the date, the time will be set to <code>00:00:00</code>. The <code>.232</code> after
the hours, minutes, and seconds is optional and specifies the
milliseconds.</p>

<h4 id="relative-time">Relative time</h4>

<p>You can use <code>now()</code> to calculate a timestamp relative to the server&rsquo;s
current timestamp. For example:</p>
<pre class="highlight sql"><span class="k">select</span> <span class="n">value</span> <span class="k">from</span> <span class="n">response_times</span> <span class="k">where</span> <span class="n">time</span> <span class="o">&gt;</span> <span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="n">h</span> <span class="k">limit</span> <span class="mi">1000</span><span class="p">;</span>
</pre>

<p>will return all points starting an hour ago until now.</p>

<p>Other options for how to specify time durations are <code>u</code> for
microseconds, <code>s</code> for seconds, <code>m</code> for minutes, <code>h</code> for hours, <code>d</code>
for days and <code>w</code> for weeks. If no suffix is given the value is
interpreted as microseconds.</p>

<h4 id="absolute-time">Absolute time</h4>

<p>You can specify timestamp in epoch time, which is defined as the
number of microseconds that have elapsed since 00:00:00 Coordinated
Universal Time (UTC), Thursday, 1 January 1970. You can use the same
suffixes from the previous section if you don&rsquo;t want to specify
timestamp in microseconds. For example:</p>
<pre class="highlight sql"><span class="k">select</span> <span class="n">value</span> <span class="k">from</span> <span class="n">response_times</span> <span class="k">where</span> <span class="n">time</span> <span class="o">&gt;</span> <span class="mi">1388534400</span><span class="n">s</span>
</pre>

<p>will return all points that were writtern after <code>2014-01-01 00:00:00</code></p>

<h2 id="selecting-a-specific-point">Selecting a Specific Point</h2>

<p>Points are uniquely identified by the time series they appear in, the time, and the sequence number. Here&rsquo;s a query that returns a specific point.</p>
<pre class="highlight sql"><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">events</span> <span class="k">where</span> <span class="n">time</span> <span class="o">=</span> <span class="mi">1400497861762723</span> <span class="k">and</span> <span class="n">sequence_number</span> <span class="o">=</span> <span class="mi">2321</span><span class="p">;</span>
</pre>

<p><strong>Note</strong> that the time is a very large number. That&rsquo;s because it&rsquo;s a microsecond scale epoch. InfluxDB always stores points at this scale, but most libraries will return the time as either a second, or millisecond scale value. If you&rsquo;re selecting a specific point, you&rsquo;ll need to know the exact microsecond scale epoch that point has otherwise you&rsquo;ll get an unexpected empty result.</p>

<h2 id="selecting-multiple-series">Selecting Multiple Series</h2>

<p>You can select from multiple series by name or by specifying a regex to match against. Here are a few examples.</p>
<pre class="highlight sql"><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">events</span><span class="p">,</span> <span class="n">errors</span><span class="p">;</span>
</pre>

<p>Get the last hour of data from the two series <code>events</code>, and <code>errors</code>. Here&rsquo;s a regex example:</p>
<pre class="highlight sql"><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="o">/^</span><span class="n">stats</span><span class="err">\</span><span class="p">.</span><span class="o">/</span><span class="n">i</span> <span class="k">where</span> <span class="n">time</span> <span class="o">&gt;</span> <span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="n">h</span><span class="p">;</span>
</pre>

<p>Get the last hour of data from every time series that starts with <code>stats.</code> (case insensitive). Another example:</p>
<pre class="highlight sql"><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="o">/</span><span class="p">.</span><span class="o">*/</span> <span class="k">limit</span> <span class="mi">1</span><span class="p">;</span>
</pre>

<p>Return the last point from every time series in the database.</p>

<h2 id="deleting-data-or-dropping-series">Deleting data or dropping series</h2>

<p>The delete query looks like the following:</p>
<pre class="highlight sql"><span class="k">delete</span> <span class="k">from</span> <span class="n">response_times</span> <span class="k">where</span> <span class="n">time</span> <span class="o">&lt;</span> <span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="n">h</span>
</pre>

<p>With no time constraints this query will delete every point in the
time series <code>response_times</code>. You must be a cluster or database admin to run delete queries.</p>

<p>You can also delete from any series that matches a regex:</p>
<pre class="highlight sql"><span class="k">delete</span> <span class="k">from</span> <span class="o">/^</span><span class="n">stats</span><span class="p">.</span><span class="o">*/</span> <span class="k">where</span> <span class="n">time</span> <span class="o">&lt;</span> <span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="mi">7</span><span class="n">d</span>
</pre>

<p>Any conditions in the where clause that don&rsquo;t set the start and/or end
time will be ignored, for example the following query returns an error:</p>
<pre class="highlight sql"><span class="k">delete</span> <span class="k">from</span> <span class="n">response_times</span> <span class="k">where</span> <span class="k">user</span> <span class="o">=</span> <span class="s1">'foo'</span>
</pre>

<p>Delete time conditions only support ranges, an equals condition (=) is
currently not supported.</p>

<p>Deleting all data for a series will only remove the points. It will
still remain in the index. If you want to remove all data from a
series and remove it from the list of series in a database use the
<code>drop</code> query:</p>
<pre class="highlight sql"><span class="k">drop</span> <span class="n">series</span> <span class="n">response_times</span>
</pre>

<h3 id="note-about-delete-performance">Note about Delete Performance</h3>

<p>Currently, deletes are not very efficient. If you want to quickly evict old data, the best way to do that is by dropping a shard. For more <a href="/docs/v0.8/advanced_topics/sharding_and_storage.html">information on shards go here</a>.</p>

<h2 id="the-where-clause">The Where Clause</h2>

<p>We&rsquo;ve already seen the where clause for selecting time ranges and a specific point. You can also use it to filter based on given values, comparators, or regexes. Here are some examples of different ways to use <em>where</em>.</p>
<pre class="highlight sql"><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">events</span> <span class="k">where</span> <span class="k">state</span> <span class="o">=</span> <span class="s1">'NY'</span><span class="p">;</span>

<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">log_lines</span> <span class="k">where</span> <span class="n">line</span> <span class="o">=~</span> <span class="o">/</span><span class="n">error</span><span class="o">/</span><span class="n">i</span><span class="p">;</span>

<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">events</span> <span class="k">where</span> <span class="n">customer_id</span> <span class="o">=</span> <span class="mi">23</span> <span class="k">and</span> <span class="k">type</span> <span class="o">=</span> <span class="s1">'click'</span><span class="p">;</span>

<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">response_times</span> <span class="k">where</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">500</span><span class="p">;</span>

<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">events</span> <span class="k">where</span> <span class="n">email</span> <span class="o">!~</span> <span class="o">/</span><span class="p">.</span><span class="o">*</span><span class="n">gmail</span><span class="p">.</span><span class="o">*/</span><span class="p">;</span>

<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">nagios_checks</span> <span class="k">where</span> <span class="n">status</span> <span class="o">&lt;&gt;</span> <span class="mi">0</span><span class="p">;</span>

<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">events</span> <span class="k">where</span> <span class="n">signed_in</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>

<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">events</span>
<span class="k">where</span> <span class="p">(</span><span class="n">email</span> <span class="o">=~</span> <span class="o">/</span><span class="p">.</span><span class="o">*</span><span class="n">gmail</span><span class="p">.</span><span class="o">*</span> <span class="k">or</span> <span class="n">email</span> <span class="o">=~</span> <span class="o">/</span><span class="p">.</span><span class="o">*</span><span class="n">yahoo</span><span class="p">.</span><span class="o">*/</span><span class="p">)</span> <span class="k">and</span> <span class="k">state</span> <span class="o">=</span> <span class="s1">'ny'</span><span class="p">;</span>
</pre>

<p>The where clause supports comparisons against regexes, strings, booleans, floats, integers, and the times listed before. Comparators include <code>=</code> equal to, <code>&gt;</code> greater than, <code>&lt;</code> less than, <code>&lt;&gt;</code> not equal to, <code>=~</code> matches against, <code>!~</code> doesn&rsquo;t match against. You can chain logic together using <code>and</code> and <code>or</code> and you can separate using <code>(</code> and <code>)</code></p>

<h2 id="group-by">Group By</h2>

<p>The group by clause in InfluxDB is used not only for grouping by given values, but also for grouping by given time buckets. You&rsquo;ll always be pairing this up with <a href="/docs/v0.8/api/aggregate_functions.html">a function</a> in the <code>select</code> clause. Here are a few examples to illustrate how group by works.</p>
<pre class="highlight sql"><span class="c1">-- count of events in 10 minute intervals
</span><span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="k">type</span><span class="p">)</span> <span class="k">from</span> <span class="n">events</span> <span class="k">group</span> <span class="k">by</span> <span class="n">time</span><span class="p">(</span><span class="mi">10</span><span class="n">m</span><span class="p">);</span>

<span class="c1">-- count of each unique type of event in 10 minute intervals
</span><span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="k">type</span><span class="p">)</span> <span class="k">from</span> <span class="n">events</span> <span class="k">group</span> <span class="k">by</span> <span class="n">time</span><span class="p">(</span><span class="mi">10</span><span class="n">m</span><span class="p">),</span> <span class="k">type</span><span class="p">;</span>

<span class="c1">-- 95th percentile of response times in 30 second intervals
</span><span class="k">select</span> <span class="n">percentile</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">95</span><span class="p">)</span> <span class="k">from</span> <span class="n">response_times</span> <span class="k">group</span> <span class="k">by</span> <span class="n">time</span><span class="p">(</span><span class="mi">30</span><span class="n">s</span><span class="p">);</span>
</pre>

<p>By default functions will output a column that have the same name as the function, e.g. <code>count</code> will output a column with the name <code>count</code> in order to change the name of the column an <code>AS</code> clause is required. Here is an example to illustrate how aliasing work:</p>
<pre class="highlight sql"><span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="k">type</span><span class="p">)</span> <span class="k">as</span> <span class="n">number_of_types</span> <span class="k">group</span> <span class="k">by</span> <span class="n">time</span><span class="p">(</span><span class="mi">10</span><span class="n">m</span><span class="p">);</span>
</pre>

<p>The time function takes the time interval which can be in
microseconds, seconds, minutes, hours, days or weeks. To specify the
units you can use the respective suffix <code>u</code>, <code>s</code>, <code>m</code>, <code>h</code>, <code>d</code> and <code>w</code>.</p>

<h3 id="filling-intervals-with-no-data">Filling intervals with no data</h3>

<p>By default, group by intervals that have no data will not have associated datapoints. For instance, say you have the following query:</p>
<pre class="highlight sql"><span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="k">type</span><span class="p">)</span> <span class="k">from</span> <span class="n">events</span>
<span class="k">group</span> <span class="k">by</span> <span class="n">time</span><span class="p">(</span><span class="mi">1</span><span class="n">h</span><span class="p">)</span> <span class="k">where</span> <span class="n">time</span> <span class="o">&gt;</span> <span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="mi">3</span><span class="n">h</span>
</pre>

<p>If the events series had data for this hour and two hours ago only, you&rsquo;d only get two points in the result. If you want to ensure that you get back points for intervals that don&rsquo;t have data, you can use the <code>fill</code> function. Any numerical value, including negative values, and the special value <code>null</code>, are valid values for <code>fill</code>. For example, each of the following queries is valid:</p>
<pre class="highlight sql"><span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="k">type</span><span class="p">)</span> <span class="k">from</span> <span class="n">events</span>
<span class="k">group</span> <span class="k">by</span> <span class="n">time</span><span class="p">(</span><span class="mi">1</span><span class="n">h</span><span class="p">)</span> <span class="n">fill</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="k">where</span> <span class="n">time</span> <span class="o">&gt;</span> <span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="mi">3</span><span class="n">h</span>
</pre>
<pre class="highlight sql"><span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="k">type</span><span class="p">)</span> <span class="k">from</span> <span class="n">events</span>
<span class="k">group</span> <span class="k">by</span> <span class="n">time</span><span class="p">(</span><span class="mi">1</span><span class="n">h</span><span class="p">)</span> <span class="n">fill</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">where</span> <span class="n">time</span> <span class="o">&gt;</span> <span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="mi">3</span><span class="n">h</span>
</pre>
<pre class="highlight sql"><span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="k">type</span><span class="p">)</span> <span class="k">from</span> <span class="n">events</span>
<span class="k">group</span> <span class="k">by</span> <span class="n">time</span><span class="p">(</span><span class="mi">1</span><span class="n">h</span><span class="p">)</span> <span class="n">fill</span><span class="p">(</span><span class="k">null</span><span class="p">)</span> <span class="k">where</span> <span class="n">time</span> <span class="o">&gt;</span> <span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="mi">3</span><span class="n">h</span>
</pre>

<p>Note that <code>fill</code> must go at the end of the group by clause if there are other arguments:</p>
<pre class="highlight sql"><span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="k">type</span><span class="p">)</span> <span class="k">from</span> <span class="n">events</span>
<span class="k">group</span> <span class="k">by</span> <span class="n">time</span><span class="p">(</span><span class="mi">1</span><span class="n">h</span><span class="p">),</span> <span class="k">type</span> <span class="n">fill</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="k">where</span> <span class="n">time</span> <span class="o">&gt;</span> <span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="mi">3</span><span class="n">h</span>
</pre>

<h2 id="merging-series">Merging Series</h2>

<p>You can merge multiple time series into a single stream in the select clause. This is helpful when you want to run a function over one of the columns with an associated group by time clause.</p>
<pre class="highlight sql"><span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="k">type</span><span class="p">)</span> <span class="k">from</span> <span class="n">user_events</span> <span class="n">merge</span> <span class="n">admin_events</span> <span class="k">group</span> <span class="k">by</span> <span class="n">time</span><span class="p">(</span><span class="mi">10</span><span class="n">m</span><span class="p">)</span>
</pre>

<p>You&rsquo;d get a single time series with the count of events from the two combined in 10 minute intervals.</p>

<h2 id="joining-series">Joining Series</h2>

<p>Joins will put two or more series together. Since timestamps may not match exactly, InfluxDB will make a best effort to put points together. Joins are used when you want to perform a transformation of one time series against another. Here are a few examples.</p>
<pre class="highlight sql"><span class="k">select</span> <span class="n">hosta</span><span class="p">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">hostb</span><span class="p">.</span><span class="n">value</span>
<span class="k">from</span> <span class="n">cpu_load</span> <span class="k">as</span> <span class="n">hosta</span>
<span class="k">inner</span> <span class="k">join</span> <span class="n">cpu_load</span> <span class="k">as</span> <span class="n">hostb</span>
<span class="k">where</span> <span class="n">hosta</span><span class="p">.</span><span class="k">host</span> <span class="o">=</span> <span class="s1">'hosta.influxdb.orb'</span> <span class="k">and</span> <span class="n">hostb</span><span class="p">.</span><span class="k">host</span> <span class="o">=</span> <span class="s1">'hostb.influxdb.org'</span><span class="p">;</span>
</pre>

<p>The above query will return a time series of the combined cpu load for hosts a and b. The individual points will be coerced into the closest time frames to match up.</p>
<pre class="highlight sql"><span class="k">select</span> <span class="n">errors_per_minute</span><span class="p">.</span><span class="n">value</span> <span class="o">/</span> <span class="n">page_views_per_minute</span><span class="p">.</span><span class="n">value</span>
<span class="k">from</span> <span class="n">errors_per_minute</span>
<span class="k">inner</span> <span class="k">join</span> <span class="n">page_views_per_minute</span>
</pre>

<p>The above query will return the error rate per minute.</p>
</div></div></section><script type="text/javascript">(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-45024174-1', 'influxdb.com');
ga('send', 'pageview');</script><script type="text/javascript">(function() {
  $("#docs h1, #docs h2, #docs h3, #docs h4").each(function(i, el) {
    var id, text;
    id = el.id;
    text = $(el).text();
    return $(el).html('<a href="#' + id + '">' + text + '</a>');
  });

}).call(this);
</script></body></html>